<div (scroll)="nextPage($event)" class="main-container">
  <div class="for-you-section">
    <div *ngIf="(hasPreferences$ | async)" class="row has-preference-bg">
      <mat-icon class="icon-size">videogame_asset</mat-icon>
      <div class="card-cta">
        <span class="card-title">{{ 'mainfeed.preferences.title' | translate}}</span>
        <div>
          <button class="button-cta" mat-stroked-button routerLink="/for-you/discover">
            <span>{{ 'mainfeed.preferences.cta' | translate | uppercase }}</span>
          </button>
        </div>
      </div>
    </div>
    <div *ngIf="(hasPreferences$ | async) === false" class="row no-preference-bg">
      <mat-icon class="icon-size">warning</mat-icon>
      <div class="card-cta">
          <span class="card-title">
            {{ 'mainfeed.nopreferencesset.title' | translate }}
          </span>
        <div>
          <button class="button-cta" mat-stroked-button routerLink=""> <!--TODO: link to preferences -->
            <span>{{ 'mainfeed.nopreferencesset.cta' | translate }}</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  <h1>{{ getTabLabel(selectedTab.value) | translate }}</h1>
  <header>
    <mat-button-toggle-group [formControl]="selectedTab" class="tab-group">
      <mat-button-toggle class="tab" value="following">
        <mat-icon class="tab-icon">groups</mat-icon>
        {{ "following" | translate | titlecase }}
      </mat-button-toggle>
      <mat-button-toggle class="tab" value="recommended">
        <mat-icon class="tab-icon">local_fire_department</mat-icon>
        {{ "recommended" | translate | titlecase }}
      </mat-button-toggle>
      <mat-button-toggle class="tab" value="new">
        <mat-icon class="tab-icon">newspaper</mat-icon>
        {{ "new" | translate | titlecase }}
      </mat-button-toggle>
    </mat-button-toggle-group>
  </header>
  <section *ngIf="(loadingReviews$ | async) as loadingReviews" class="main-section">
    <div *ngIf="loadingReviews.loading" class="centered-container spinner">
      <mat-spinner></mat-spinner>
    </div>
    <!--TODO: cuando haya # de followers en User, agregar "seguir a gente" -->
    <div *ngIf="!loadingReviews.loading && loadingReviews.reviews.totalPages === 0" class="centered-container">
      <h2>{{ 'mainfeed.noReviews' | translate }}</h2>
    </div>
    <mat-grid-list
      [style.visibility]="loadingReviews.loading ? 'hidden' : 'visible'"
      cols="2"
      gutterSize="20px"
      rowHeight="300px"
      style="display: flex;"
    >
      <mat-grid-tile *ngFor="let review of loadingReviews.reviews.content" colspan="1" rowspan="1" style="">
        <app-review-card [review]="review" style="width: 100%"></app-review-card>
      </mat-grid-tile>
      <mat-grid-tile *ngIf="loadingReviews.loadingInfinite" colspan="2" rowspan="1">
        <mat-spinner class="centered-container">
        </mat-spinner>
      </mat-grid-tile>
    </mat-grid-list>
  </section>
</div>
